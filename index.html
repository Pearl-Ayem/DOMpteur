<html>
<head>
  <meta charset="utf-8">
  <title>DOMpteur</title>
  <script type="text/javascript" src="./DOMpteur.js"></script>
</head>
<body>
  <h1>DOMpteur <small>v0.2.2</small></h1>
  <h2>play with your DOM-tree</h2>
  <div id="demodiv">
    <p id="demoele" class="demoeleclass" data-foo="foodata">lorem ipsum</p>
    <p>dolor sit amet</p>
    <div>
      <div>
        paragraph
      </div>
      <p><small>(1)</small> </p>
      <p><small>(2)</small> </p>
      <p><small>(3)</small> </p>
      <p><small>(4)</small> </p>
    </div>
  </div>
  <div id="demoxml">
    
  </div>
  <div id="demoencode">
    
  </div>
  <div id="withstyle" style="background: #333; color: #ccc; border: 1px solid black; display: none;">
    
  </div>
  <pre style="display:none;"><code id="xmlexample"><!--
    <chapters>
      <chapter id='0'>
        <start>00:00:00</start>
        <title>lorem</title>
        <href>https://github.com/SimonWaldherr/podlove-web-player</href>
        <img></img>
      </chapter>
      <chapter id='1'>
        <start>00:01:00</start>
        <title>ipsum</title>
        <href>https://github.com/SimonWaldherr/disTime.js</href>
        <img>samples/coverimage-red.png</img>
      </chapter>
      <chapter id='2'>
        <start>00:02:30</start>
        <title>dolor</title>
        <href>https://github.com/SimonWaldherr/ColorConverter.js</href>
        <img>samples/coverimage-green.png</img>
      </chapter>
      <chapter id='3'>
        <start>00:03:00</start>
        <title>sit</title>
        <href></href>
        <img>samples/coverimage-blue.png</img>
      </chapter>
    </chapters>
--></code></pre>
  <script>
    onDOMReady(function () {
      window.setTimeout(demos,   500,  0);
      window.setTimeout(demos,  1500,  1);
      window.setTimeout(demos,  3000,  2);
      window.setTimeout(demos,  4500,  3);
      window.setTimeout(demos,  6000,  4);
      window.setTimeout(demos,  7500,  5);
      window.setTimeout(demos,  9000,  6);
      window.setTimeout(demos, 10500,  8);
      window.setTimeout(demos, 12000,  9);
      window.setTimeout(demos, 13500, 10);
      window.setTimeout(demos, 15000, 11);
      
      window.setTimeout(demos, 1000, 7, '#e3ae23');
      window.setTimeout(demos, 2000, 7, '#e33323');
      window.setTimeout(demos, 3000, 7, '#1333f3');
      window.setTimeout(demos, 4000, 7, '#13f3f3');
      window.setTimeout(demos, 5000, 7, '#cccccc');
      window.setTimeout(demos, 6000, 7, '#666666');
      window.setTimeout(demos, 7000, 7, '#000000');
    });
    
    function demos (i) {
      var args = Array.prototype.slice.call(arguments), ele;
      switch (i) {
        case 0:
          dompteur.addCSS('* {font-family: "Lucida Grande", "Lucida Sans Unicode", Geneva, sans-serif; }');
          dompteur.addCSS('style.css');
          break;
        case 1:
          $('#demoele').addHTML('<br>add HTML via Id');
          break;
        case 2:
          $('.demoeleclass')[0].addHTML('<br>add HTML via Class');
          break;
        case 3:
          $('#demodiv').$(' p')[1].addHTML('<br>add HTML via TagName');
          break;
        case 4:
          $('#demodiv').$(' div')[0].$(' p').forEach(
            function (elem) {
              elem.addHTML('add HTML via Id, two TagNames and forEach');
            }
          );
          break;
        case 5:
          $('#demodiv').childNodes.last().addAsFirst({
            text:'foo',
            tag:'p'
          });
          break;
        case 6:
          ele = document.createElement('p');
          ele.innerText = 'bar';
          $('#demodiv').childNodes.last().addAsLast(ele);
          break;
        case 7:
          $('#demodiv').find('p').forEach(
            function (elem) {
              elem.style.color = args[1];
            }
          );
          break;
        case 8:
          var xml = $('#xmlexample').innerHTML;
          xml = xml.substr(9, xml.length-13);
          $('#demoxml').addViaXML(xml, function (json) {
            var i, chapter, html = '';
            for (i = 0; i < json.CHAPTERS.CHAPTER.length; i++) {
              chapter = json.CHAPTERS.CHAPTER[i];
              html += chapter.START.$ + ' ' + chapter.TITLE.$;
              if (typeof chapter.HREF.$ === 'string') {
                if (chapter.HREF.$.length > 3) {
                  html += ' &lt;' + chapter.HREF.$ + '&gt;';
                  /*
                  if (typeof chapter.IMAGE.$ === 'string') {
                    if (chapter.IMAGE.$.length > 3) {
                      html += ' &lt;' + chapter.IMAGE.$ + '&gt;';
                    }
                  }
                  */
                }
              }
              html += '<br/>';
            }
            return html;
          });
          break;
        case 9:
          window.setTimeout("$('#demoencode').addAsFirst('<br/><br/>');", 1000);
          $(' head')[0].find('style')[0].innerHTML = '';
          $('#demoencode').addHTML($('#demoele').encodeHTML() + '<br/>');
          $('#demoencode').addHTML('<div>foo</div>'.encodeHTML() + '<br/>');
          $('#demoencode').addHTML('&lt;div&gt;foo&lt/div&gt;'.decodeHTML() + '<br/>');
          break;
        case 10:
          $('#withstyle').setHTML(JSON.stringify($('#withstyle').getCSS(), null, '  '));
          $('#withstyle').setCSS({'display':'block'});
          break;
        case 11:
          $('#withstyle').clearCSS();
          break;
      }
    }
  </script>
</body>
</html>
