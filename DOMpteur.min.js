/*
 * DOMpteur
 *
 * Copyright 2013, Simon Waldherr - http://simon.waldherr.eu/
 * Released under the MIT Licence - http://simon.waldherr.eu/license/mit/
 *
 * Github:  https://github.com/simonwaldherr/DOMpteur/
 * Version: 0.2.2
 */

var dompteur = {matches:{"#":"getElementById","@":"getElementsByName"," ":"getElementsByTagName","=":"getElementsByTagName",".":"getElementsByClassName","*":"querySelectorAll"},domready:!1,defaultTagName:"p",htmldecode:function(a){var b=document.createElement("div");b.innerHTML=a;return a=b.innerText||b.textContent},htmlencode:function(a){var b=document.createElement("div");b.appendChild(document.createTextNode(a));return a=b.innerHTML},toJSON:function(a){var b=!0,c={},f;"string"===typeof a&&(b=document.createElement("div"),
b.innerHTML=a,a=b,b=!1);f=function(a,b){var c,d,k,g,h;if(3===a.nodeType)a.nodeValue.match(/[\S]{2,}/)&&(b.$=a.nodeValue);else if(1===a.nodeType){h={};c=a.nodeName;for(g=0;a.attributes&&g<a.attributes.length;g+=1)k=a.attributes[g],d=k.localName,k=k.nodeValue,h["@"+d]=k;b[c]instanceof Array?b[c].push(h):b[c]=b[c]instanceof Object?[b[c],h]:h;for(c=0;c<a.childNodes.length;c+=1)f(a.childNodes[c],h)}else if(9===a.nodeType)for(h=0;h<a.childNodes.length;h+=1)f(a.childNodes[h],b)};f(a,c);b||(c=c.DIV);return c},
addHeadElement:function(a,b,c){var f,e=document.getElementById(b);if("Object"!==typeof a){if(void 0!==b){if(null!==e&&"head"===e.parentNode.tagName&&-1!==a.indexOf("{"))return void 0===e.getAttribute("href")&&(void 0===e.getAttribute("src")&&e.tagName===c)&&document.getElementById(b),!1}else f="dompteur"+parseInt(Date.now()/1E3,10),-1!==a.indexOf("{")?(c=document.createElement(c),c.innerHTML=a):"style"===c?(c=document.createElement("link"),c.href=a,c.rel="stylesheet",c.type="text/css"):(c=document.createElement("script"),
c.src=a,c.type="text/javascript"),c.id=f,document.getElementsByTagName("head")[0].appendChild(c);return void 0!==f?f:b}},addCSS:function(a,b){return dompteur.addHeadElement(a,b,"style")},addJS:function(a,b){return dompteur.addHeadElement(a,b,"script")},setDOMReady:function(){dompteur.domready=!0},workOnCSS:function(a,b,c,f){var e={},l=!1,m=!1,d,k,g={};void 0!==b&&null!==b&&(m=b);void 0!==c&&null!==c&&(l=c);void 0!==f&&null!==f&&(e=f);if(window.getComputedStyle){b=window.getComputedStyle(a,null);c=
0;for(f=b.length;c<f;c+=1)d=b[c],k=b.getPropertyValue(d),!1!==m&&m(d,b.getPropertyValue(d)),void 0!==e[d]?a.style[d]=e[d]:void 0!==e.all&&(a.style[d]=""),g[d]=k;!1!==l&&l(g);return g}if(a.currentStyle){b=a.currentStyle;for(d in b)void 0!==b[d]&&3<b[d].length&&(!1!==m&&m(d,b[d]),void 0!==e[d]?a.style[d]=e[d]:void 0!==e.all&&(a.style[d]=""),g[d]=b[d]);!1!==l&&l(g);return g}b=a.style;if("object"===typeof b){for(d in b)"function"!==typeof b[d]&&(!1!==m&&m(d,b[d]),void 0!==e[d]?a.style[d]=e[d]:void 0!==
e.all&&(a.style[d]=""),g[d]=b[d]);!1!==l&&l(g);return g}return!1},getXbyX:function(a){var b=a.charAt(0);return document[dompteur.matches[b]](a.substr(1))},onDOMReady:function(a){!1===dompteur.domready?window.addEventListener?(window.addEventListener("DOMContentLoaded",dompteur.setDOMReady,!1),window.addEventListener("DOMContentLoaded",a,!1)):(window.attachEvent("onload",dompteur.setDOMReady),window.attachEvent("onload",a)):a()}},$,onDOMReady;$=void 0!==$?$:dompteur.getXbyX;
onDOMReady=void 0!==onDOMReady?onDOMReady:dompteur.onDOMReady;Object.prototype.$=void 0!==Object.prototype.$?Object.prototype.$:function(a){var b=a.charAt(0);return this[dompteur.matches[b]](a.substr(1))};Object.prototype.getData=void 0!==Object.prototype.getData?Object.prototype.getData:function(a){this.getAttribute("data-"+a)};Object.prototype.setData=void 0!==Object.prototype.setData?Object.prototype.setData:function(a,b){this.setAttribute("data-"+a,b)};
Object.prototype.addHTML=void 0!==Object.prototype.addHTML?Object.prototype.addHTML:function(a){this.innerHTML+=a};Object.prototype.setHTML=void 0!==Object.prototype.setHTML?Object.prototype.setHTML:function(a){this.innerHTML=a};Object.prototype.addViaJSON=void 0!==Object.prototype.addViaJSON?Object.prototype.addViaJSON:function(a,b){this.innerHTML+=b(a)};Object.prototype.addViaXML=void 0!==Object.prototype.addViaXML?Object.prototype.addViaXML:function(a,b){this.innerHTML+=b(dompteur.toJSON(a))};
Object.prototype.addAsFirst=void 0!==Object.prototype.addAsFirst?Object.prototype.addAsFirst:function(a){var b;void 0===a.innerHTML?(b=void 0===a.tag?document.createElement(dompteur.defaultTagName):document.createElement(a.tag),void 0!==a.html?b.innerHTML=a.html:void 0!==a.text?b.innerText=a.text:b.innerHTML=""):b=a;this.insertBefore(b,this.firstChild);return b};
Object.prototype.addAsLast=void 0!==Object.prototype.addAsLast?Object.prototype.addAsLast:function(a){var b;void 0===a.innerHTML?(b=void 0===a.tag?document.createElement(dompteur.defaultTagName):document.createElement(a.tag),void 0!==a.html?b.innerHTML=a.html:void 0!==a.text?b.innerText=a.text:b.innerHTML=""):b=a;this.appendChild(b);return b};
Object.prototype.encodeHTML=void 0!==Object.prototype.encodeHTML?Object.prototype.encodeHTML:function(){return"object"===typeof this?dompteur.htmlencode(this.outerHTML):dompteur.htmlencode(this)};String.prototype.decodeHTML=void 0!==String.prototype.decodeHTML?String.prototype.decodeHTML:function(){return dompteur.htmldecode(this)};NodeList.prototype.first=void 0!==NodeList.prototype.first?NodeList.prototype.first:function(){return this[0]};
NodeList.prototype.last=void 0!==NodeList.prototype.last?NodeList.prototype.last:function(){for(var a=this.length;0<a;){if(void 0!==this[a]&&this[a].hasChildNodes())return this[a];a-=1}};NodeList.prototype.forEach=void 0!==NodeList.prototype.forEach?NodeList.prototype.forEach:Array.prototype.forEach;Element.prototype.find=void 0!==Element.prototype.find?Element.prototype.find:Element.prototype.querySelectorAll;
Element.prototype.innerTEXT=void 0!==Element.prototype.innerTEXT?Element.prototype.innerTEXT:Element.prototype.textContent;Element.prototype.getCSS=void 0!==Element.prototype.getCSS?Element.prototype.getCSS:function(){return dompteur.workOnCSS(this,null,null)};Element.prototype.clearCSS=void 0!==Element.prototype.clearCSS?Element.prototype.clearCSS:function(){dompteur.workOnCSS(this,null,null,{all:!0})};
Element.prototype.setCSS=void 0!==Element.prototype.setCSS?Element.prototype.setCSS:function(a){dompteur.workOnCSS(this,null,null,a)};
